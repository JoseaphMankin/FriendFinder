<!DOCTYPE html>
<html>

<head>
	<title>Survey</title>

	<!-- Link to the jQuery Library -->
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<!-- Including Font Awesome Icons -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<!--Import Google Icon Font-->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!-- Compiled and minified Materialize CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
	<link rel="stylesheet" href="style.css">
	<!-- Compiled and minified Materialize JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>


</head>

<body>
	<header>
		<nav>
			<div class="nav-wrapper blue accent-2">
				<i class="fa fa-user-circle fa-3x" aria-hidden="true" id=logo-icon></i>
				<a href="/" class="brand-logo" id="logo">What Type of Board Gamer Are You?</a>
				<ul class="right hide-on-med-and-down" id="head-nav-links">
					<li><a href="/api/friends">API Friends List</a></li>
					<li><a href="https://github.com/JoseaphMankin/FriendFinder">GitHub Repo</a></li>
				</ul>
			</div>
		</nav>
	</header>

	<main>
		<br>
		<div class="container">
			<div class="row">
				<div class="col s12 light-green lighten-5 z-depth-5 mainpanel">
					<div id="mainpanel-content">
						<h1 class="center">Survey Questions</h1>
						<div class="divider"></div>

						<div class="input-field col s6">
							<h5>Name (Required)</h5>
							<i class="material-icons prefix">account_circle</i>
							<input type="text" class="validate" placeholder="Your Name Here" id="userName">
						</div>

						<div class="input-field col s6">
							<h5>Link to Photo Image (Required)</h5>
							<i class="material-icons prefix">picture_in_picture</i>
							<input type="text" class="validate" placeholder="Photo Link Here" id="userPhoto">
						</div>

						<!-- Survey Questions -->
						<div class="input-field col s12">
							<h3>Question 1</h3>
							<h5>Winning is more important than having fun.</h5>
							<select id="question1">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2 (Disagree)</option>
								<option value="3">3 (Neutral)</option>
								<option value="4">4 (Agree)</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 2</h3>
							<h5>Generally speaking, you prefer games should be 30 mins or less.</h5>
							<select id="question2">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2 (Disagree)</option>
								<option value="3">3 (Neutral)</option>
								<option value="4">4 (Agree)</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 3</h3>
							<h5>When having a game night, you'd like as large a group as possible.</h5>
							<select id="question3">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2 (Disagree)</option>
								<option value="3">3 (Neutral)</option>
								<option value="4">4 (Agree)</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 4</h3>
							<h5>You enjoy games with deep strategy and tactics.</h5>
							<select id="question4">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2 (Disagree)</option>
								<option value="3">3 (Neutral)</option>
								<option value="4">4 (Agree)</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 5</h3>
							<h5>You take joy in seeing your enemies crushed before you.</h5>
							<select id="question5">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2 (Disagree)</option>
								<option value="3">3 (Neutral)</option>
								<option value="4">4 (Agree)</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 6</h3>
							<h5>You believe good games should be able to support more than 4 people.</h5>
							<select id="question6">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2 (Disagree)</option>
								<option value="3">3 (Neutral)</option>
								<option value="4">4 (Agree)</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 7</h3>
							<h5>You enjoy cooperative games where everyone works together as a group.</h5>
							<select id="question7">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2 (Disagree)</option>
								<option value="3">3 (Neutral)</option>
								<option value="4">4 (Agree)</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 8</h3>
							<h5>You like games with tons of rules and game mechanisms .</h5>
							<select id="question8">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2 (Disagree)</option>
								<option value="3">3 (Neutral)</option>
								<option value="4">4 (Agree)</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 9</h3>
							<h5>If there's not a single winner, then what's the point?</h5>
							<select id="question9">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2 (Disagree)</option>
								<option value="3">3 (Neutral)</option>
								<option value="4">4 (Agree)</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 10</h3>
							<h5>The theme of the game is just as important as the rules and gameplay.</h5>
							<select id="question10">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2 (Disagree)</option>
								<option value="3">3 (Neutral)</option>
								<option value="4">4 (Agree)</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<!-- Survey Submit Button -->
						<div>
							<button class="btn waves-effect waves-light" type="submit" name="action" id="submitButton">Submit Responses
								<i class="material-icons right">send</i>
							</button>
							<br><br>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>


	<!-- Modal Dialog Displaying Closest Friend Match -->
	<div id="modal1" class="modal">
		<div class="modal-content">
			<h4>Your Gamer Type is:</h4>
			<div class="divider"></div>
			<h5 id="userMatch"></h5>
			<img id="userMatchImage" class="materialboxed" width="650" src="">
			<p id="summary"></p>
		</div>
		<div class="modal-footer">
			<a href="/survey" class="modal-action modal-close waves-effect waves-green btn-flat">Take the Survey Again!</a>
		</div>
	</div>

	<script type="text/javascript">
		$(document).ready(function () {
			$('select').material_select();
			$('.modal').modal({
				dismissible: false, // Modal can be dismissed by clicking outside of the modal
				opacity: .5, // Opacity of modal background
				inDuration: 300, // Transition in duration
				outDuration: 200, // Transition out duration
				startingTop: '4%', // Starting top style attribute
				endingTop: '10%' // Ending top style attribute
			});
		});
		// Activate submit button
		$('#submitButton').on('click', function (event) {
			event.preventDefault();
			// Gather user inputs
			let userInput = {
				name: $('#userName').val().trim(),
				photo: $('#userPhoto').val().trim(),
				scores: [
					$('#question1').val().trim(),
					$('#question2').val().trim(),
					$('#question3').val().trim(),
					$('#question4').val().trim(),
					$('#question5').val().trim(),
					$('#question6').val().trim(),
					$('#question7').val().trim(),
					$('#question8').val().trim(),
					$('#question9').val().trim(),
					$('#question10').val().trim()
				]
			};
			// console.log('userInput = ' + JSON.stringify(userInput));
			// Add user inputs to friends list
			$.post("/api/friends", userInput)
				.done(function (data) {
					// console.log('response = ' + JSON.stringify(data));
					// Set the name and image values of friend match
					$("#userMatch").html(data.matchName);
					$("#userMatchImage").attr("src", data.matchImage);

					switch (data.matchName) {
						case "The Competitor":
							$("#summary").html("Competitors play games for the thrill of victory. They enjoy outwitting, outscoring, and outplaying their opponents. Unfortunately, they may lose interest in a game in which they have no chance of winning. For this reason, games they play must have some sort of catch-up mechanic, or at least give every player the feeling that they have a chance to win." 
							+"<br><br>Best Experience: Playing to win; gets most pleasure from victory."
							+"<br>Worst Experience: Losing with no chance to catch up." 
							+"<br>Games for Competitors: Power Grid, Formula D, Lords of Vegas");
							break;
						case "The Puzzle Master":
						$("#summary").html("Puzzlers enjoy games that they can figure out. Their preferred games may be more on the complex side, as they enjoy parsing out how the game works and using that understanding to maximize efficiency and come up with the ideal move. Unfortunately, this desire to figure out and “solve” the game means they will be less likely to enjoy games with elements of chaos and randomness." 
							+"<br><br>Best Experience: Figuring out how the game works; feeling clever and efficient."
							+"<br>Worst Experience: Games that they determine can’t be solved or are too random." 
							+"<br>Games for Puzzlers: Blokus, Caverna, Five Tribes");
							break;
						case "The Social Gamer":
						$("#summary").html("Social Gamers enjoy board gaming for the social interaction that it provides. They may enjoy games that require players to interact. Social Gamers generally enjoy party games, and games that actively engage all the players. Unfortunately, this means they may have a bad experience if they play “multi-player solitaire” games, or when they can tell that people around them are having a miserable time. Social Gamers depend on others to have a good time." 
							+"<br><br>Best Experience: The social interaction; being actively engaged with other players."
							+"<br>Worst Experience: Games with no player interaction; games where other people are clearly not enjoying themselves." 
							+"<br>Games for Social Gamers: Spyfall, The Resistance, Ca$h ‘n Gun$");
							break;
						case "The Omni-Gamer":
						$("#summary").html("Omni-Gamers are the kind of gamers who enjoy a little bit of everything. They’ll rarely turn down a play and will generally try to have a good time with anything. The downside of an omni-gamer is that while they may exhibit all the positive traits of the other gamers, they may also have a bad experience for any of the above reasons." 
							+"<br><br>Best Experience: A mix of all of the above, depending on the situation."
							+"<br>Worst Experience: A mix of all of the above, depending on the situation." 
							+"<br>Games for Omni-Gamers: Just about anything.");
							break;
						default:
							break;
					}


					// Pop open the modal dialog
					$('#modal1').modal('open');
				});
		});
	</script>
</body>

</html>